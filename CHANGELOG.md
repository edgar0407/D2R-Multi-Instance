# 更新日誌 (Changelog)

> **版本歷程記錄**：供開發者與使用者快速了解各版本的更新內容
> 使用說明請參閱 [README.md](./README.md) | 技術細節請參閱 [CLAUDE.md](./CLAUDE.md)

---

## [v1.0.1] - 2025-12-21

修復多開時視窗標題設定失敗的問題。

### 修復問題
- Fix - 視窗檢測無法找到已設定自訂標題的 D2R 視窗（導致第二個以後的帳號無法設定視窗標題）

### 技術細節
- 視窗檢測現在也會搜索 `"D2R:"` 開頭的標題（已被重命名的視窗）

---

## [v1.0.0] - 2025-12-21 🎉 正式版

正式版發布！強化日誌系統，提升問題診斷能力，優化使用者體驗。

### 新增功能
- Add - 程式啟動時記錄完整環境資訊（版本、權限、路徑、設定）
- Add - 程式結束時記錄結束狀態
- Add - 日誌記錄 PowerShell 版本與作業系統資訊
- Add - 操作完成後自動倒數返回選單（MenuReturnDelay 參數，預設 5 秒）
- Add - 倒數期間可按任意鍵立即返回
- Add - 自動清理過期日誌檔案（LogRetentionDays 參數，預設 30 天）

### 修復問題
- Fix - 日誌檔案編碼問題（中文顯示亂碼）
- Fix - D2R_Launcher.bat 中文編碼問題
- Fix - D2R_Launcher.bat 版本號與主程式不同步

### 改進
- Improve - 日誌系統使用 UTF-8 編碼確保中文正確顯示
- Improve - BAT 檔案改用純英文避免編碼問題
- Improve - 不再需要手動按鍵返回選單，提升操作流暢度

---

## [b0.9.4] - 2025-10-29

新增每個帳號可指定獨立遊戲路徑的功能，支援不同遊戲版本多開。

Add - 每個帳號可設定獨立的 D2RGamePath（選填，留空使用預設路徑）

---

## [b0.9.3] - 2025-10-25

修正 Windows 10 環境下權限不足導致無法關閉 handle 的問題。

Fix - UAC 提權機制缺陷（即使「以管理員身分執行」也可能只有 Filtered Admin Token，權限不足）
Fix - 強制使用 Start-Process -Verb RunAs 重新啟動，確保獲得 Full Admin Token
Add - AlreadyElevated 內部參數，避免無限循環提權

---

## [b0.9.2] - 2025-10-24

修正 handle 解析錯誤，解決部分使用者環境下無法正確關閉 handle 的問題。

Fix - Handle ID 解析錯誤（正則表達式誤匹配路徑中的字符，導致解析出錯誤的 Handle ID）
Fix - Tokens 解析邏輯不夠嚴格，未驗證關鍵欄位結構
Add - 詳細的解析診斷日誌功能（記錄每一行的解析過程）
Add - Handle.exe 原始輸出記錄到日誌檔案（方便使用者回報問題）

---

## [b0.9.1] - 2025-10-22

新增群組功能，優化啟動流程效率提升 50%。

Add - 群組功能（自訂帳號組合，一鍵啟動特定群組）
Add - DefaultServer 與 DefaultLaunchArgs 功能（選填欄位，支援預設值）
Add - WindowInitDelay 參數化設定（可自訂視窗初始化等待時間）
Add - 選單顯示版本號、伺服器、權限狀態
Add - D2R_Launcher.bat 自動解除檔案封鎖功能
Fix - PS1 右鍵執行時閃退問題
Fix - param() 必須在腳本最前面的語法錯誤
Fix - 提權過程的錯誤處理

---

## [b0.9.0] - 2025-10-18

實作外部設定檔系統與自動提權功能。

Add - 自動提權功能（腳本自動檢測並請求管理員權限）
Add - 外部設定檔系統（config.ini）
Add - 除錯模式（-Debug 參數）
Add - 動態帳號載入（支援任意數量帳號）

---

## [Initial Release] - 2025-10-17

初始版本，實現 D2R 多開與自動登入功能。

Add - 多開功能與自動登入
Add - Handle 關閉機制（繞過遊戲多開限制）
Add - 視窗標題自訂功能（D2R: 編號 - 顯示名稱）
Add - Mutex 避免日誌衝突
